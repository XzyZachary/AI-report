var L=Object.defineProperty;var v=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var w=(o,a,e)=>a in o?L(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,g=(o,a)=>{for(var e in a||(a={}))P.call(a,e)&&w(o,e,a[e]);if(v)for(var e of v(a))$.call(a,e)&&w(o,e,a[e]);return o};var m=(o,a,e)=>new Promise((r,t)=>{var i=s=>{try{c(e.next(s))}catch(n){t(n)}},u=s=>{try{c(e.throw(s))}catch(n){t(n)}},c=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,u);c((e=e.apply(o,a)).next())});import{bc as S,m as A,bd as T,be as W,e as M}from"./bootstrap-DxLycCLO.js";import{P as b,a5 as E,v as C,$ as O,a3 as x,a_ as I,a$ as V,V as k,ad as B,aj as R,m as p,af as f,a9 as l,ag as U,J as N,ae as j,a0 as y}from"../jse/index-index-B1xr8IwA.js";import{_ as q,a as z,b as D}from"./layout.vue_vue_type_script_setup_true_lang-BEf8sM5g.js";import{u as F}from"./use-modal-djJHXv7o.js";import{_ as J}from"./avatar.vue_vue_type_script_setup_true_lang-0mU4T41s.js";import"./load-BWecsa7d.js";import"./copyright.vue_vue_type_script_setup_true_lang-DaFi5sUx.js";import"./icon.vue_vue_type_script_setup_true_lang-DiZg5E2g.js";import"./icon-button.vue_vue_type_script_setup_true_lang-C2d8SVO-.js";import"./rotate-cw-BTQBRKgi.js";import"./loading-DUXHLaGL.js";const d=b(),h=b({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function Q(){function o(r){return m(this,null,function*(){var i;const{Watermark:t}=yield O(()=>m(this,null,function*(){const{Watermark:u}=yield import("./index.esm-onHbvng2.js");return{Watermark:u}}),[]);h.value=g(g({},h.value),r),d.value=new t(h.value),yield(i=d.value)==null?void 0:i.create()})}function a(r){return m(this,null,function*(){var t;d.value?(yield C(),yield(t=d.value)==null?void 0:t.changeOptions(g(g({},h.value),r))):yield o(r)})}function e(){var r;(r=d.value)==null||r.destroy()}return E(()=>{e()}),{destroyWatermark:e,updateWatermark:a,watermark:d}}const X=x({name:"LoginExpiredModal",__name:"login-expired-modal",props:I({avatar:{default:""},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=V(o,"open"),[e,r]=F();return k(()=>a.value,t=>{r.setState({isOpen:t})}),(t,i)=>(B(),R("div",null,[p(l(e),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:f(()=>[p(l(J),{src:t.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),p(l(S),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":t.$t("authentication.loginAgainSubTitle"),title:t.$t("authentication.loginAgainTitle")},{default:f(()=>[U(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3})]))}}),le=x({__name:"basic",setup(o){const a=A(),e=T(),r=W(),{destroyWatermark:t,updateWatermark:i}=Q(),u=N(()=>{var s,n;return(n=(s=a.userInfo)==null?void 0:s.avatar)!=null?n:y.app.defaultAvatar});function c(){return m(this,null,function*(){yield e.logout(!1)})}return k(()=>y.app.watermark,s=>m(this,null,function*(){var n;s?yield i({content:`${(n=a.userInfo)==null?void 0:n.username}`}):t()}),{immediate:!0}),(s,n)=>(B(),j(l(D),{onClearPreferencesAndLogout:c},{"user-dropdown":f(()=>{var _;return[p(l(q),{avatar:u.value,text:(_=l(a).userInfo)==null?void 0:_.realName,description:"ann.vben@gmail.com","tag-text":"Pro",onLogout:c},null,8,["avatar","text"])]}),extra:f(()=>[p(l(X),{open:l(r).loginExpired,"onUpdate:open":n[0]||(n[0]=_=>l(r).loginExpired=_),avatar:u.value},{default:f(()=>[p(M)]),_:1},8,["open","avatar"])]),"lock-screen":f(()=>[p(l(z),{avatar:u.value,onToLogin:c},null,8,["avatar"])]),_:1}))}});export{le as default};
